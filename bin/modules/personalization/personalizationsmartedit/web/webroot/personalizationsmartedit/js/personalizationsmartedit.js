!function(t){var e={};function __webpack_require__(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,o){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(__webpack_require__.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)__webpack_require__.d(o,n,function(e){return t[e]}.bind(null,n));return o},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=17)}([function(t,e,o){t.exports=o(16)(1)},function(t,e,o){t.exports=o(4)(0)},function(t,e){t.exports=angular},function(t,e){t.exports=moment},function(t,e){t.exports=vendor_chunk},function(t,e,o){t.exports=o(4)(72)},function(t,e,o){t.exports=o(4)(244)},function(t,e,o){t.exports=o(4)(1)},function(t,e,o){var n={"./combinedView/personalizationsmarteditCombinedViewComponentLightUpDecorator.js":9,"./componentLightUpDecorator/personalizationsmarteditComponentLightUpDecorator.js":10,"./externalComponentDecorator/personalizationsmarteditExternalComponentDecorator.js":11,"./sharedSlotDecorator/personalizationsmarteditSharedSlotDecorator.js":12,"./templates.js":13};function webpackContext(t){var e=webpackContextResolve(t);return o(e)}function webpackContextResolve(t){if(!o.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}webpackContext.keys=function webpackContextKeys(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=8},function(t,e){angular.module("personalizationsmarteditCombinedViewComponentLightUpDecorator",["personalizationsmarteditTemplates","personalizationsmarteditServicesModule","personalizationsmarteditCommonsModule"]).directive("personalizationsmarteditCombinedViewComponentLightUp",["personalizationsmarteditContextService","crossFrameEventService","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING",function(t,e,o){return{templateUrl:"personalizationsmarteditCombinedViewComponentLightUpDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,scope:{smarteditComponentId:"@",smarteditComponentType:"@"},controller:["$scope","$element",function(n,i){var a=[];Object.keys(o).forEach(function(t,e){a.push(o[e].borderClass)}),a=a.join(" "),n.letterForElement="",n.classForElement="";var r=function(){var e=t.getCombinedView();if(e.enabled){var r=i.parent().closest('[class~="smartEditComponentX"][data-smartedit-container-source-id][data-smartedit-container-type="CxCmsComponentContainer"][data-smartedit-personalization-customization-id][data-smartedit-personalization-variation-id]');r.length>0&&(r.removeClass(a),(e.selectedItems||[]).forEach(function(t,e){var i=r.data().smarteditPersonalizationCustomizationId===t.customization.code;i=i&&r.data().smarteditPersonalizationVariationId===t.variation.code;var a=e%Object.keys(o).length;i&&(r.addClass(o[a].borderClass),n.letterForElement=String.fromCharCode("a".charCodeAt()+a).toUpperCase(),n.classForElement=o[a].listClass)}))}};this.$onInit=function(){this.unRegister=e.subscribe("PERSONALIZATION_COMBINEDVIEW_CONTEXT_SYNCHRONIZED",function(){r()}),r()},this.$onDestroy=function(){this.unRegister()}}]}}])},function(t,e){angular.module("personalizationsmarteditComponentLightUpDecorator",["yjqueryModule","personalizationsmarteditTemplates","personalizationsmarteditServicesModule","smarteditServicesModule"]).directive("personalizationsmarteditComponentLightUp",["yjQuery","personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService","crossFrameEventService","CONTAINER_SOURCE_ID_ATTR","OVERLAY_COMPONENT_CLASS","CONTAINER_TYPE_ATTRIBUTE","ID_ATTRIBUTE","TYPE_ATTRIBUTE","CATALOG_VERSION_UUID_ATTRIBUTE",function(t,e,o,n,i,a,r,s,l,c){return{templateUrl:"personalizationsmarteditComponentLightUpDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,scope:{smarteditComponentId:"@",smarteditComponentType:"@"},controller:["$scope","$element",function(d,m){var p='[class~="'+a+'"]['+i+"]["+r+'="CxCmsComponentContainer"]',u='[class~="'+a+'"]['+r+'="CxCmsComponentContainer"][data-smartedit-personalization-action-id]',C="["+s+"]["+c+"]["+l+"]",h=function(t){var o=!1,n=e.getCustomize();n.selectedCustomization&&n.selectedVariations&&(o=t.closest(u).length>0);return o},z=function(){var n=m.parent().closest(C),i=n.closest(p);i.toggleClass("perso__component-decorator",h(n)),i.toggleClass("hyicon hyicon-checkedlg perso__component-decorator-icon",h(n)),i.toggleClass("personalizationsmarteditComponentSelected",function(){var n=!1;if(angular.isArray(e.getCustomize().selectedVariations)){var i=o.getParentContainerIdForComponent(m);n=t.inArray(i,e.getCustomize().selectedComponents)>-1}return n}())};this.$onInit=function(){this.unRegister=n.subscribe("PERSONALIZATION_CUSTOMIZE_CONTEXT_SYNCHRONIZED",function(){z()}),z()},this.$onDestroy=function(){this.unRegister()}}]}}])},function(t,e){angular.module("personalizationsmarteditExternalComponentDecoratorModule",[]).directive("personalizationsmarteditExternalComponentDecorator",function(){return{templateUrl:"externalComponentDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,controller:"externalComponentDecoratorController",controllerAs:"ctrl",scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(t,e){angular.module("personalizationsmarteditSharedSlotDecorator",["slotSharedServiceModule"]).controller("personalizationsmarteditSharedSlotController",["slotSharedService","$element",function(t,e){var o=this;this.$onChanges=function(t){t.active&&t.active.currentValue&&(e.offset().top<=e.find(".decorative-panel-area").height()&&e.find(".decorative-panel-area").css("margin-top",e.find(".decorator-padding-container").height()),o.isPopupOpened=!1)},this.$onInit=function(){o.slotSharedFlag=!1,t.isSlotShared(o.smarteditComponentId).then(function(t){o.slotSharedFlag=t})}}]).directive("personalizationsmarteditSharedSlot",function(){return{templateUrl:"personalizationsmarteditSharedSlotDecoratorTemplate.html",restrict:"C",controller:"personalizationsmarteditSharedSlotController",controllerAs:"ctrl",scope:{},transclude:!0,bindToController:{smarteditComponentId:"@",active:"<"}}})},function(t,e){angular.module("personalizationsmarteditTemplates",[]).run(["$templateCache",function(t){"use strict";t.put("web/features/personalizationsmartedit/combinedView/personalizationsmarteditCombinedViewComponentLightUpDecoratorTemplate.html",'<div data-ng-class="classForElement"\n    class="pe-combined-view-component-letter">{{letterForElement}}</div>\n<div data-ng-transclude></div>'),t.put("web/features/personalizationsmartedit/componentLightUpDecorator/personalizationsmarteditComponentLightUpDecoratorTemplate.html","<div data-ng-transclude></div>"),t.put("web/features/personalizationsmartedit/contextMenu/ShowActionList/personalizationsmarteditShowActionListTemplate.html",'<div class="pe-combinedview-ranking">\n    <div class="pe-combinedview-ranking__info-layout">\n        <div class="pe-combinedview-ranking__title"\n            data-translate="personalization.modal.showactionlist.title"></div>\n        <div class="perso__page-level-help-message"\n            data-translate="personalization.modal.showactionlist.help.label"></div>\n    </div>\n    <div class="pe-combinedview-ranking__list-item"\n        data-ng-repeat="item in $ctrl.selectedItems"\n        data-ng-init="$ctrl.initItem(item)"\n        data-ng-show="item.visible">\n        <div class="pe-combinedview-ranking__letter-layout">\n            <div data-ng-class="$ctrl.getClassForElement($index)"\n                data-ng-bind="$ctrl.getLetterForElement($index)"></div>\n        </div>\n        <div class="pe-combinedview-ranking__names-layout">\n            <div class="perso-wrap-ellipsis"\n                data-ng-bind="item.customization.name"\n                title="{{item.customization.name}}"></div>\n            <div class="perso-wrap-ellipsis perso-tree__primary-data"\n                data-ng-bind="item.variation.name"\n                title="{{item.variation.name}}"></div>\n        </div>\n        <div class="pe-combinedview-ranking__icon">\n            <span data-ng-if="!$ctrl.isCustomizationFromCurrentCatalog(item.customization)"\n                class="perso__globe-icon hyicon hyicon-globe"\n                data-uib-tooltip="{{item.variation.catalogVersionNameL10N}}"\n                data-tooltip-placement="top right"></span>\n        </div>\n    </div>\n</div>'),t.put("web/features/personalizationsmartedit/contextMenu/ShowComponentInfoList/personalizationsmarteditShowComponentInfoListTemplate.html",'<div class="pe-component-info">\n    <div class="pe-component-info__info-layout">\n        <div data-ng-show="!$ctrl.isPageBlocked">\n            <div class="pe-component-info__title"\n                data-translate="personalization.modal.showcomponentinfolist.title"></div>\n            <div class="perso__page-level-help-message"\n                data-ng-show="$ctrl.pagination.totalCount > 0"\n                data-translate="personalization.modal.showcomponentinfolist.help.label"></div>\n\n            <div class="perso__page-level-help-message"\n                data-ng-show="$ctrl.pagination.totalCount === 0"\n                data-translate="personalization.modal.showcomponentinfolist.help.nocustomizations">\n            </div>\n        </div>\n        <div data-ng-show="$ctrl.isPageBlocked">\n            <div class="pe-component-info__title"\n                data-translate="personalization.modal.showcomponentinfolist.blocked.title"></div>\n            <div class="perso__page-level-help-message"\n                data-translate="personalization.modal.showcomponentinfolist.blocked.label"></div>\n        </div>\n    </div>\n    <div class="perso__page-level-help-message pe-component-info__info-layout"\n        data-ng-show="$ctrl.pagination.totalCount > 0">\n        <span data-translate="personalization.modal.showcomponentinfolist.help.numberofenabledcustomizations"></span>\n        <span data-ng-bind="$ctrl.pagination.totalCount"></span>\n    </div>\n    <div class="pe-component-info__wrapper"\n        personalization-infinite-scroll="$ctrl.addMoreItems()"\n        personalization-infinite-scroll-distance="2">\n        <div data-personalization-prevent-parent-scroll>\n            <div data-ng-class="$ctrl.customizationVisible() ? \'pe-component-info__list-item\':\'\'"\n                data-ng-repeat="item in $ctrl.actions">\n                <div class="pe-component-info__names-layout">\n                    <div class="perso-wrap-ellipsis"\n                        data-ng-bind="item.customizationName"\n                        title="{{item.customizationName}}"></div>\n                    <div class="perso-wrap-ellipsis perso-tree__primary-data"\n                        data-ng-bind="item.variationName"\n                        title="{{item.variationName}}"></div>\n                </div>\n                <div data-ng-class="$ctrl.customizationVisible() ? \'pe-component-info__icon\':\'\'">\n                    <span data-ng-show="!$ctrl.isCustomizationFromCurrentCatalog(item.customization)"\n                        data-ng-class="$ctrl.customizationVisible()?\'perso__globe-icon hyicon hyicon-globe\':\'\'"\n                        data-uib-tooltip="{{item.customization.catalogVersionNameL10N}}"\n                        data-tooltip-placement="top right"></span>\n                </div>\n            </div>\n            <div class="pe-spinner--inner"\n                data-ng-show="$ctrl.moreCustomizationsRequestProcessing">\n                <div data-ng-include="\'waitDialog.html\'"></div>\n            </div>\n        </div>\n    </div>\n</div>'),t.put("web/features/personalizationsmartedit/sharedSlotDecorator/personalizationsmarteditSharedSlotDecoratorTemplate.html",'<div class="se-decorative-panel-wrapper">\n    <div class="cmsx-ctx-wrapper1 se-slot-contextual-menu-level1">\n        <div class="cmsx-ctx-wrapper2 se-slot-contextual-menu-level2">\n            <div class="se-decorative-panel-area"\n                data-ng-if="ctrl.active && ctrl.slotSharedFlag">\n                <div class="se-decorator-panel-padding-center"></div>\n                <div class="se-decorative-panel-slot-contextual-menu">\n                    <div class="se-shared-slot-button-template"\n                        data-ng-if="ctrl.slotSharedFlag">\n                        <div class="se-slot-ctx-menu__dropdown-toggle-wrapper se-slot-ctx-menu__divider"\n                            data-uib-dropdown\n                            data-dropdown-append-to="\'#smarteditoverlay\'"\n                            data-auto-close="outsideClick"\n                            data-is-open="ctrl.isPopupOpened">\n                            <button type="button"\n                                data-uib-dropdown-toggle\n                                class="se-slot-ctx-menu__dropdown-toggle sap-icon--chain-link se-slot-ctx-menu__dropdown-toggle-icon"\n                                data-ng-class="{\'se-slot-ctx-menu__dropdown-toggle--open\': ctrl.isPopupOpened}"\n                                id="sharedSlotButton-{{::ctrl.smarteditComponentId}}">\n                            </button>\n                            <div class="dropdown-menu dropdown-menu-right se-slot__dropdown-menu se-shared-slot__dropdown"\n                                data-uib-dropdown-menu>\n                                <div class="se-shared-slot__body">\n                                    <div class="se-shared-slot__description"\n                                        data-translate="personalization.slot.shared.popover.message"></div>\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="se-decoratorative-body-area">\n                <div class="se-decorative-body__padding--left"\n                    data-ng-class="{active: ctrl.active}"></div>\n                <div data-ng-class="ctrl.active && ctrl.slotSharedFlag ? \'se-decorative-body__inner-border active\' : \'\'"></div>\n                <div class="se-wrapper-data"\n                    data-ng-transclude\n                    data-ng-class="{active: ctrl.active}"></div>\n                <div class="se-decorative-body__padding--right"\n                    data-ng-class="{active: ctrl.active}"></div>\n            </div>\n        </div>\n    </div>\n</div>')}])},function(t,e,o){var n={"./templates.js":15};function webpackContext(t){var e=webpackContextResolve(t);return o(e)}function webpackContextResolve(t){if(!o.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}webpackContext.keys=function webpackContextKeys(){return Object.keys(n)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=14},function(t,e){angular.module("personalizationcommonsTemplates",[]).run(["$templateCache",function(t){"use strict";t.put("web/features/personalizationcommons/dateTimePickerRange/dateTimePickerRangeTemplate.html",'<div class="pe-datetime-range">\n    <div class="col-md-6 pe-datetime-range__from"\n        data-ng-class="{\'has-error\': !$ctrl.isFromDateValid}">\n        <label for="customization-start-date"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate"\n            class="fd-form__label perso__datetimepicker__label"></label>\n        <y-help data-template="\'<span data-translate=personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate.help></span>\'">\n        </y-help>\n        <div class="input-group se-date-field pe-date-field"\n            id="date-picker-range-from"\n            data-ng-show="$ctrl.isEditable">\n            <input type=\'text\'\n                name="date_from_key"\n                class="fd-form-control se-date-field--input pe-date-field__input"\n                placeholder="{{ $ctrl.placeholderText | translate}}"\n                data-ng-disabled="!$ctrl.isEditable"\n                name="{{$ctrl.name}}"\n                data-ng-model="$ctrl.dateFrom"\n                id="customization-start-date" />\n            <span class="input-group-addon se-date-field--button pe-datetime-range__picker"\n                data-ng-show="$ctrl.isEditable">\n                <span class="sap-icon--calendar pe-datetime-range__picker__icon"></span>\n            </span>\n        </div>\n        <div class="input-group se-date-field pe-date-field"\n            id="date-picker-range-from"\n            data-ng-show="!$ctrl.isEditable">\n            <input type=\'text\'\n                name="date_from_key"\n                class="fd-form-control se-date-field--input pe-date-field__input "\n                data-ng-class="{\'pe-input--is-disabled\': !$ctrl.isEditable}"\n                data-ng-model="$ctrl.dateFrom"\n                data-date-formatter\n                id="customization-start-date"\n                data-ng-disabled="true"\n                data-format-type="short">\n        </div>\n        <span data-ng-if="!$ctrl.isFromDateValid"\n            class="help-block pe-datetime__error-msg pe-datetime__msg"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformatfrom.description">\n        </span>\n    </div>\n    <div class="col-md-6 pe-datetime-range__to"\n        data-ng-class="{\'has-error\':!$ctrl.isToDateValid, \'has-warning\':$ctrl.isEndDateInThePast}">\n        <label for="customization-end-date"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate"\n            class="fd-form__label perso__datetimepicker__label"></label>\n        <y-help data-template="\'<span data-translate=personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate.help></span>\'">\n        </y-help>\n        <div class="input-group se-date-field pe-date-field"\n            id="date-picker-range-to">\n            <input type=\'text\'\n                name="date_to_key"\n                class="fd-form-control se-date-field--input pe-date-field__input"\n                placeholder="{{ $ctrl.placeholderText | translate}}"\n                data-ng-disabled="!$ctrl.isEditable"\n                name="{{$ctrl.name}}"\n                data-ng-model="$ctrl.dateTo"\n                id="customization-end-date" />\n            <span class="input-group-addon se-date-field--button pe-datetime-range__picker"\n                data-ng-show="$ctrl.isEditable">\n                <span class="sap-icon--calendar pe-datetime-range__picker__icon"></span>\n            </span>\n        </div>\n        <div class="input-group se-date-field pe-date-field"\n            id="date-picker-range-to"\n            data-ng-show="!$ctrl.isEditable">\n            <input type=\'text\'\n                name="date_to_key"\n                class="fd-form-control se-date-field--input pe-date-field__input "\n                data-ng-class="{\'pe-input--is-disabled\': !$ctrl.isEditable}"\n                data-ng-model="$ctrl.dateTo"\n                data-date-formatter\n                id="customization-end-date"\n                data-ng-disabled="true"\n                data-format-type="short">\n        </div>\n        <span class="help-block pe-datetime__error-msg pe-datetime__msg"\n            data-ng-if="!$ctrl.isToDateValid"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformat.description">\n        </span>\n        <span data-ng-if="$ctrl.isEndDateInThePast"\n            class="help-block pe-datetime__warning-msg pe-datetime__msg">\n            <span data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddateinthepast.description"></span>\n        </span>\n    </div>\n</div>'),t.put("web/features/personalizationcommons/personalizationsmarteditScrollZone/personalizationsmarteditScrollZoneBottomTemplate.html",'<div class="perso__scrollzone perso__scrollzone--bottom"\n    data-ng-class="$ctrl.isTransparent?\'perso__scrollzone--transparent\':\'perso__scrollzone--normal\'"\n    data-ng-show="$ctrl.scrollZoneVisible && $ctrl.scrollZoneBottom"\n    data-ng-mouseenter="$ctrl.start=true;$ctrl.scrollBottom()"\n    data-ng-mouseleave="$ctrl.stopScroll()">\n</div>'),t.put("web/features/personalizationcommons/personalizationsmarteditScrollZone/personalizationsmarteditScrollZoneTopTemplate.html",'<div class="perso__scrollzone perso__scrollzone--top"\n    data-ng-class="$ctrl.isTransparent?\'perso__scrollzone--transparent\':\'perso__scrollzone--normal\'"\n    data-ng-show="$ctrl.scrollZoneVisible && $ctrl.scrollZoneTop"\n    data-ng-mouseenter="$ctrl.start=true;$ctrl.scrollTop()"\n    data-ng-mouseleave="$ctrl.stopScroll()">\n</div>')}])},function(t,e){t.exports=smarteditcommons},function(t,e,o){"use strict";o.r(e),o.d(e,"Personalizationsmarteditmodule",function(){return K}),o.d(e,"Personalizationsmartedit",function(){return J});var n=o(1);function importAll(t){t.keys().forEach(function(e){t(e)})}var i=o(0),a=function(){return function Personalization(){this.enabled=!1}}(),r=function(){return function Customize(){this.enabled=!1,this.selectedCustomization=null,this.selectedVariations=null,this.selectedComponents=null}}(),s=function(){return function CombinedView(){this.enabled=!1,this.selectedItems=null,this.customize=new r}}(),l=function(){return function SeData(){this.pageId=null,this.seExperienceData=null,this.seConfigurationData=null}}(),c=o(2),d=function(){function PersonalizationsmarteditContextUtils(){}return PersonalizationsmarteditContextUtils.prototype.getContextObject=function(){return{personalization:new a,customize:new r,combinedView:new s,seData:new l}},PersonalizationsmarteditContextUtils.prototype.clearCustomizeContext=function(t){var e=t.getCustomize();e.enabled=!1,e.selectedCustomization=null,e.selectedVariations=null,e.selectedComponents=null,t.setCustomize(e)},PersonalizationsmarteditContextUtils.prototype.clearCustomizeContextAndReloadPreview=function(t,e){var o=c.copy(e.getCustomize().selectedVariations);this.clearCustomizeContext(e),c.isObject(o)&&!c.isArray(o)&&t.removePersonalizationDataFromPreview()},PersonalizationsmarteditContextUtils.prototype.clearCombinedViewCustomizeContext=function(t){var e=t.getCombinedView();e.customize.enabled=!1,e.customize.selectedCustomization=null,e.customize.selectedVariations=null,e.customize.selectedComponents=null,(e.selectedItems||[]).forEach(function(t){delete t.highlighted}),t.setCombinedView(e)},PersonalizationsmarteditContextUtils.prototype.clearCombinedViewContext=function(t){var e=t.getCombinedView();e.enabled=!1,e.selectedItems=null,t.setCombinedView(e)},PersonalizationsmarteditContextUtils.prototype.clearCombinedViewContextAndReloadPreview=function(t,e){var o=c.copy(e.getCombinedView().enabled),n=c.copy(e.getCombinedView().selectedItems);this.clearCombinedViewContext(e),o&&n&&t.removePersonalizationDataFromPreview()},PersonalizationsmarteditContextUtils=n.__decorate([Object(i.SeInjectable)()],PersonalizationsmarteditContextUtils)}(),m=o(3),p={provide:"PERSONALIZATION_DATE_FORMATS",useValue:{SHORT_DATE_FORMAT:"M/D/YY",MODEL_DATE_FORMAT:"YYYY-MM-DDTHH:mm:SSZ"}},u=function(){function PersonalizationsmarteditDateUtils(t,e,o,n){this.$translate=t,this.DATE_CONSTANTS=e,this.PERSONALIZATION_DATE_FORMATS=o,this.isBlank=n}return PersonalizationsmarteditDateUtils.$inject=["$translate","DATE_CONSTANTS","PERSONALIZATION_DATE_FORMATS","isBlank"],PersonalizationsmarteditDateUtils.prototype.formatDate=function(t,e){return e=e||this.DATE_CONSTANTS.MOMENT_FORMAT,t?(t.match&&t.match(/^(\d{4})\-(\d{2})\-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+|\-)(\d{4})$/)&&(t=t.slice(0,-2)+":"+t.slice(-2)),m(new Date(t)).format(e)):""},PersonalizationsmarteditDateUtils.prototype.formatDateWithMessage=function(t,e){return e=e||this.PERSONALIZATION_DATE_FORMATS.SHORT_DATE_FORMAT,t?this.formatDate(t,e):this.$translate.instant("personalization.toolbar.pagecustomizations.nodatespecified")},PersonalizationsmarteditDateUtils.prototype.isDateInThePast=function(t){return!this.isBlank(t)&&m(t,this.DATE_CONSTANTS.MOMENT_FORMAT).isBefore()},PersonalizationsmarteditDateUtils.prototype.isDateValidOrEmpty=function(t){return this.isBlank(t)||this.isDateValid(t)},PersonalizationsmarteditDateUtils.prototype.isDateValid=function(t){return m(t,this.DATE_CONSTANTS.MOMENT_FORMAT).isValid()},PersonalizationsmarteditDateUtils.prototype.isDateRangeValid=function(t,e){return!(!this.isBlank(t)&&!this.isBlank(e))||m(new Date(t)).isSameOrBefore(m(new Date(e)))},PersonalizationsmarteditDateUtils.prototype.isDateStrFormatValid=function(t,e){return e=e||this.DATE_CONSTANTS.MOMENT_FORMAT,!this.isBlank(t)&&m(t,e,!0).isValid()},PersonalizationsmarteditDateUtils=n.__decorate([Object(i.SeInjectable)()],PersonalizationsmarteditDateUtils)}(),C={provide:"PERSONALIZATION_MODEL_STATUS_CODES",useValue:{ENABLED:"ENABLED",DISABLED:"DISABLED"}},h={provide:"PERSONALIZATION_VIEW_STATUS_MAPPING_CODES",useValue:{ALL:"ALL",ENABLED:"ENABLED",DISABLED:"DISABLED"}},z={provide:"PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING",useValue:{0:{borderClass:"personalizationsmarteditComponentSelected0",listClass:"personalizationsmarteditComponentSelectedList0"},1:{borderClass:"personalizationsmarteditComponentSelected1",listClass:"personalizationsmarteditComponentSelectedList1"},2:{borderClass:"personalizationsmarteditComponentSelected2",listClass:"personalizationsmarteditComponentSelectedList2"},3:{borderClass:"personalizationsmarteditComponentSelected3",listClass:"personalizationsmarteditComponentSelectedList3"},4:{borderClass:"personalizationsmarteditComponentSelected4",listClass:"personalizationsmarteditComponentSelectedList4"},5:{borderClass:"personalizationsmarteditComponentSelected5",listClass:"personalizationsmarteditComponentSelectedList5"},6:{borderClass:"personalizationsmarteditComponentSelected6",listClass:"personalizationsmarteditComponentSelectedList6"},7:{borderClass:"personalizationsmarteditComponentSelected7",listClass:"personalizationsmarteditComponentSelectedList7"},8:{borderClass:"personalizationsmarteditComponentSelected8",listClass:"personalizationsmarteditComponentSelectedList8"},9:{borderClass:"personalizationsmarteditComponentSelected9",listClass:"personalizationsmarteditComponentSelectedList9"},10:{borderClass:"personalizationsmarteditComponentSelected10",listClass:"personalizationsmarteditComponentSelectedList10"},11:{borderClass:"personalizationsmarteditComponentSelected11",listClass:"personalizationsmarteditComponentSelectedList11"},12:{borderClass:"personalizationsmarteditComponentSelected12",listClass:"personalizationsmarteditComponentSelectedList12"},13:{borderClass:"personalizationsmarteditComponentSelected13",listClass:"personalizationsmarteditComponentSelectedList13"},14:{borderClass:"personalizationsmarteditComponentSelected14",listClass:"personalizationsmarteditComponentSelectedList14"}}},S={provide:"COMBINED_VIEW_TOOLBAR_ITEM_KEY",useValue:"personalizationsmartedit.container.combinedview.toolbar"},v={provide:"CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY",useValue:"personalizationsmartedit.container.pagecustomizations.toolbar"},g=function(){function PersonalizationsmarteditUtils(t,e,o,n,i,a,r){this.$q=t,this.$filter=e,this.l10nFilter=o,this.PERSONALIZATION_MODEL_STATUS_CODES=n,this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES=i,this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING=a,this.catalogService=r}return PersonalizationsmarteditUtils.$inject=["$q","$filter","l10nFilter","PERSONALIZATION_MODEL_STATUS_CODES","PERSONALIZATION_VIEW_STATUS_MAPPING_CODES","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING","catalogService"],PersonalizationsmarteditUtils.prototype.pushToArrayIfValueExists=function(t,e,o){o&&t.push({key:e,value:o})},PersonalizationsmarteditUtils.prototype.getVariationCodes=function(t){return void 0===typeof t||null===t?[]:t.map(function(t){return t.code}).filter(function(t){return void 0!==t})},PersonalizationsmarteditUtils.prototype.getVariationKey=function(t,e){return void 0===t||void 0===e?[]:e.map(function(e){return{variationCode:e.code,customizationCode:t,catalog:e.catalog,catalogVersion:e.catalogVersion}})},PersonalizationsmarteditUtils.prototype.getSegmentTriggerForVariation=function(t){var e=(t.triggers||[]).filter(function(t){return"segmentTriggerData"===t.type});return 0===e.length?{}:e[0]},PersonalizationsmarteditUtils.prototype.isPersonalizationItemEnabled=function(t){return t.status===this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED},PersonalizationsmarteditUtils.prototype.getTranslateFilter=function(){return this.$filter("translate")},PersonalizationsmarteditUtils.prototype.getEnablementTextForCustomization=function(t,e){return e=e||"personalization",this.isPersonalizationItemEnabled(t)?this.getTranslateFilter()(e+".customization.enabled"):this.getTranslateFilter()(e+".customization.disabled")},PersonalizationsmarteditUtils.prototype.getEnablementTextForVariation=function(t,e){return e=e||"personalization",this.isPersonalizationItemEnabled(t)?this.getTranslateFilter()(e+".variation.enabled"):this.getTranslateFilter()(e+".variation.disabled")},PersonalizationsmarteditUtils.prototype.getEnablementActionTextForVariation=function(t,e){return e=e||"personalization",this.isPersonalizationItemEnabled(t)?this.getTranslateFilter()(e+".variation.options.disable"):this.getTranslateFilter()(e+".variation.options.enable")},PersonalizationsmarteditUtils.prototype.getActivityStateForCustomization=function(t){return t.status===this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED?m().isBetween(new Date(t.enabledStartDate),new Date(t.enabledEndDate),"minute","[]")?"perso__status--enabled":"perso__status--ignore":"perso__status--disabled"},PersonalizationsmarteditUtils.prototype.getActivityStateForVariation=function(t,e){return e.enabled?this.getActivityStateForCustomization(t):"perso__status--disabled"},PersonalizationsmarteditUtils.prototype.isItemVisible=function(t){return"DELETED"!==t.status},PersonalizationsmarteditUtils.prototype.getVisibleItems=function(t){var e=this;return t.filter(function(t){return e.isItemVisible(t)})},PersonalizationsmarteditUtils.prototype.getValidRank=function(t,e,o){for(var n=t.indexOf(e),i=o<0?-1:1,a=n+o;a>=0&&a<t.length&&!this.isItemVisible(t[a]);)a+=i;return t[a=(a=a>=t.length?t.length-1:a)<0?0:a].rank},PersonalizationsmarteditUtils.prototype.getStatusesMapping=function(){var t=[];return t.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.ALL,text:"personalization.context.status.all",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED,this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED]}),t.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.ENABLED,text:"personalization.context.status.enabled",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED]}),t.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.DISABLED,text:"personalization.context.status.disabled",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED]}),t},PersonalizationsmarteditUtils.prototype.getClassForElement=function(t){var e=t%Object.keys(this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;return this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING[e].listClass},PersonalizationsmarteditUtils.prototype.getLetterForElement=function(t){var e=t%Object.keys(this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;return String.fromCharCode("a".charCodeAt(0)+e).toUpperCase()},PersonalizationsmarteditUtils.prototype.getCommerceCustomizationTooltip=function(t,e,o){var n=this;e=e||"",o=o||"\n";var i="";return c.forEach(t.commerceCustomizations,function(t,a){i+=e+n.$filter("translate")("personalization.modal.manager.commercecustomization."+a)+": "+t+o}),i},PersonalizationsmarteditUtils.prototype.getCommerceCustomizationTooltipHTML=function(t){return this.getCommerceCustomizationTooltip(t,"<div>","</div>")},PersonalizationsmarteditUtils.prototype.isItemFromCurrentCatalog=function(t,e){var o=e.seExperienceData.catalogDescriptor;return t.catalog===o.catalogId&&t.catalogVersion===o.catalogVersion},PersonalizationsmarteditUtils.prototype.hasCommerceActions=function(t){return t.numberOfCommerceActions>0},PersonalizationsmarteditUtils.prototype.getCatalogVersionNameByUuid=function(t){var e=this,o=this.$q.defer();return this.catalogService.getCatalogVersionByUuid(t).then(function(t){o.resolve(e.l10nFilter(t.catalogName)+" ("+t.version+")")}),o.promise},PersonalizationsmarteditUtils.prototype.getAndSetCatalogVersionNameL10N=function(t){this.getCatalogVersionNameByUuid(t.catalog+"/"+t.catalogVersion).then(function(e){t.catalogVersionNameL10N=e})},PersonalizationsmarteditUtils=n.__decorate([Object(i.SeInjectable)()],PersonalizationsmarteditUtils)}();window.__smartedit__.addDecoratorPayload("SeComponent","DateTimePickerRangeComponent",{templateUrl:"dateTimePickerRangeTemplate.html",inputs:["name: =","dateFrom: =","dateTo: =","isEditable: =","dateFormat: ="]});var f=function(){function DateTimePickerRangeComponent(t,e,o,n,i){this.DATE_CONSTANTS=t,this.personalizationsmarteditDateUtils=e,this.$element=o,this.$scope=n,this.languageService=i,this.placeholderText="personalization.commons.datetimepicker.placeholder",this.isFromDateValid=!1,this.isToDateValid=!1,this.isEndDateInThePast=!1}return DateTimePickerRangeComponent.$inject=["DATE_CONSTANTS","personalizationsmarteditDateUtils","$element","$scope","languageService"],DateTimePickerRangeComponent.prototype.$onInit=function(){this.actionsIfisEditable()},DateTimePickerRangeComponent.prototype.getDateOrDefault=function(t){try{return m(new Date(t))}catch(t){return!1}},DateTimePickerRangeComponent.prototype.actionsIfisEditable=function(){var t=this;this.isEditable&&(this.getFromPickerNode().datetimepicker({format:this.DATE_CONSTANTS.MOMENT_FORMAT,showClear:!0,showClose:!0,useCurrent:!1,widgetPositioning:{horizontal:"right",vertical:"bottom"},locale:this.languageService.getBrowserLocale().split("-")[0]}).on("dp.update dp.hide dp.change",function(t){var e=this.personalizationsmarteditDateUtils.formatDate(t.date,void 0);this.personalizationsmarteditDateUtils.isDateValidOrEmpty(e)&&this.personalizationsmarteditDateUtils.isDateValidOrEmpty(this.dateTo)&&!this.personalizationsmarteditDateUtils.isDateRangeValid(e,this.dateTo)&&(e=c.copy(this.dateTo)),this.dateFrom=e}.bind(this)),this.getToPickerNode().datetimepicker({format:this.DATE_CONSTANTS.MOMENT_FORMAT,showClear:!0,showClose:!0,useCurrent:!1,widgetPositioning:{horizontal:"right",vertical:"bottom"},locale:this.languageService.getBrowserLocale().split("-")[0]}).on("dp.change dp.hide dp.change",function(t){var e=this.personalizationsmarteditDateUtils.formatDate(t.date,void 0);this.personalizationsmarteditDateUtils.isDateValidOrEmpty(e)&&this.personalizationsmarteditDateUtils.isDateValidOrEmpty(this.dateFrom)&&!this.personalizationsmarteditDateUtils.isDateRangeValid(this.dateFrom,e)&&(e=c.copy(this.dateFrom)),this.dateTo=e}.bind(this)),this.$scope.$watch("this.$ctrl.dateFrom",function(){t.isFromDateValid=t.personalizationsmarteditDateUtils.isDateValidOrEmpty(t.dateFrom),t.personalizationsmarteditDateUtils.isDateStrFormatValid(t.dateFrom,t.DATE_CONSTANTS.MOMENT_FORMAT)?t.getToDatetimepicker().minDate(t.getMinToDate(t.dateFrom)):t.getToDatetimepicker().minDate(m())},!0),this.$scope.$watch("this.$ctrl.dateTo",function(){t.personalizationsmarteditDateUtils.isDateValidOrEmpty(t.dateTo)?(t.isToDateValid=!0,t.isEndDateInThePast=t.personalizationsmarteditDateUtils.isDateInThePast(t.dateTo)):(t.isToDateValid=!1,t.isEndDateInThePast=!1),t.personalizationsmarteditDateUtils.isDateStrFormatValid(t.dateTo,t.DATE_CONSTANTS.MOMENT_FORMAT)?t.getFromDatetimepicker().maxDate(t.getDateOrDefault(t.dateTo)):""===t.dateTo&&t.getFromDatetimepicker().maxDate(!1)},!0))},DateTimePickerRangeComponent.prototype.getMinToDate=function(t){return this.personalizationsmarteditDateUtils.isDateInThePast(t)?m():this.getDateOrDefault(t)},DateTimePickerRangeComponent.prototype.getFromPickerNode=function(){return this.$element.querySelectorAll("#date-picker-range-from")},DateTimePickerRangeComponent.prototype.getFromDatetimepicker=function(){return this.getFromPickerNode().datetimepicker().data("DateTimePicker")},DateTimePickerRangeComponent.prototype.getToPickerNode=function(){return this.$element.querySelectorAll("#date-picker-range-to")},DateTimePickerRangeComponent.prototype.getToDatetimepicker=function(){return this.getToPickerNode().datetimepicker().data("DateTimePicker")},DateTimePickerRangeComponent=n.__decorate([Object(i.SeComponent)({templateUrl:"dateTimePickerRangeTemplate.html",inputs:["name: =","dateFrom: =","dateTo: =","isEditable: =","dateFormat: ="]})],DateTimePickerRangeComponent)}();window.__smartedit__.addDecoratorPayload("SeDirective","IsDateValidOrEmptyDirective",{require:"ngModel",selector:"[isdatevalidorempty]"});var _=function(){function IsDateValidOrEmptyDirective(t){this.personalizationsmarteditDateUtils=t}return IsDateValidOrEmptyDirective.$inject=["personalizationsmarteditDateUtils"],IsDateValidOrEmptyDirective.prototype.isDateInThePast=function(t){return this.personalizationsmarteditDateUtils.isDateValidOrEmpty(t)},IsDateValidOrEmptyDirective=n.__decorate([Object(i.SeDirective)({require:"ngModel",selector:"[isdatevalidorempty]"})],IsDateValidOrEmptyDirective)}(),P=function(){function PaginationHelper(t){void 0===t&&(t={}),this.count=t.count||0,this.page=t.page||0,this.totalCount=t.totalCount||0,this.totalPages=t.totalPages||0}return PaginationHelper.$inject=["initialData"],PaginationHelper.prototype.reset=function(){this.count=50,this.page=-1,this.totalPages=1,this.totalCount=0},PaginationHelper.prototype.getCount=function(){return this.count},PaginationHelper.prototype.getPage=function(){return this.page},PaginationHelper.prototype.getTotalCount=function(){return this.totalCount},PaginationHelper.prototype.getTotalPages=function(){return this.totalPages},PaginationHelper=n.__decorate([Object(i.SeInjectable)()],PaginationHelper)}(),y=function(){function PersonalizationsmarteditMessageHandler(t){this.alertService=t}return PersonalizationsmarteditMessageHandler.$inject=["alertService"],PersonalizationsmarteditMessageHandler.prototype.sendInformation=function(t){this.alertService.showInfo(t)},PersonalizationsmarteditMessageHandler.prototype.sendError=function(t){this.alertService.showDanger(t)},PersonalizationsmarteditMessageHandler.prototype.sendWarning=function(t){this.alertService.showWarning(t)},PersonalizationsmarteditMessageHandler.prototype.sendSuccess=function(t){this.alertService.showSuccess(t)},PersonalizationsmarteditMessageHandler=n.__decorate([Object(i.SeInjectable)()],PersonalizationsmarteditMessageHandler)}(),T=function(){function PersonalizationsmarteditCommerceCustomizationService(){this.nonCommerceActionTypes=["cxCmsActionData"],this.types=[]}return PersonalizationsmarteditCommerceCustomizationService.prototype.isNonCommerceAction=function(t){return this.nonCommerceActionTypes.some(function(e){return e===t.type})},PersonalizationsmarteditCommerceCustomizationService.prototype.isCommerceAction=function(t){return!this.isNonCommerceAction(t)},PersonalizationsmarteditCommerceCustomizationService.prototype.isTypeEnabled=function(t,e){return void 0!==e&&null!==e&&!0===e[t.confProperty]},PersonalizationsmarteditCommerceCustomizationService.prototype.registerType=function(t){var e=t.type,o=!1;this.types.forEach(function(t){t.type===e&&(o=!0)}),o||this.types.push(t)},PersonalizationsmarteditCommerceCustomizationService.prototype.getAvailableTypes=function(t){var e=this;return this.types.filter(function(o){return e.isTypeEnabled(o,t)})},PersonalizationsmarteditCommerceCustomizationService.prototype.isCommerceCustomizationEnabled=function(t){return this.getAvailableTypes(t).length>0},PersonalizationsmarteditCommerceCustomizationService.prototype.getNonCommerceActionsCount=function(t){return(t.actions||[]).filter(this.isNonCommerceAction,this).length},PersonalizationsmarteditCommerceCustomizationService.prototype.getCommerceActionsCountMap=function(t){var e={};return(t.actions||[]).filter(this.isCommerceAction,this).forEach(function(t){var o=t.type.toLowerCase(),n=e[o];void 0===n?n=1:n+=1,e[o]=n}),e},PersonalizationsmarteditCommerceCustomizationService.prototype.getCommerceActionsCount=function(t){return(t.actions||[]).filter(this.isCommerceAction,this).length},PersonalizationsmarteditCommerceCustomizationService=n.__decorate([Object(i.SeInjectable)()],PersonalizationsmarteditCommerceCustomizationService)}();window.__smartedit__.addDecoratorPayload("SeComponent","PersonalizationsmarteditScrollZoneComponent",{inputs:["scrollZoneVisible","getElementToScroll: &","isTransparent","scrollZoneId"]});var I=function(){function PersonalizationsmarteditScrollZoneComponent(t,e,o,n){this.$scope=t,this.$timeout=e,this.$compile=o,this.yjQuery=n,this.scrollZoneTop=!0,this.scrollZoneBottom=!0,this.start=!1,this.scrollZoneVisible=!1,this.isTransparent=!1,this.elementToScroll={},this.scrollZoneId=""}return PersonalizationsmarteditScrollZoneComponent.$inject=["$scope","$timeout","$compile","yjQuery"],PersonalizationsmarteditScrollZoneComponent.prototype.stopScroll=function(){this.start=!1},PersonalizationsmarteditScrollZoneComponent.prototype.scrollTop=function(){var t=this;this.start&&(this.scrollZoneTop=!(this.elementToScroll.scrollTop()<=2),this.scrollZoneBottom=!0,this.elementToScroll.scrollTop(this.elementToScroll.scrollTop()-15),this.$timeout(function(){t.scrollTop()},100))},PersonalizationsmarteditScrollZoneComponent.prototype.scrollBottom=function(){var t=this;if(this.start){this.scrollZoneTop=!0;var e=this.elementToScroll.get(0).scrollHeight-this.elementToScroll.scrollTop();this.scrollZoneBottom=!(Math.abs(e-this.elementToScroll.outerHeight())<2),this.elementToScroll.scrollTop(this.elementToScroll.scrollTop()+15),this.$timeout(function(){t.scrollBottom()},100)}},PersonalizationsmarteditScrollZoneComponent.prototype.$onChanges=function(t){t.scrollZoneVisible&&(this.start=t.scrollZoneVisible.currentValue,this.scrollZoneTop=!0,this.scrollZoneBottom=!0)},PersonalizationsmarteditScrollZoneComponent.prototype.$onInit=function(){var t=this.$compile('<div id="sliderTopScrollZone'+this.scrollZoneId+'" data-ng-include="\'personalizationsmarteditScrollZoneTopTemplate.html\'"></div>')(this.$scope);c.element("body").append(t);var e=this.$compile('<div id="sliderBottomScrollZone'+this.scrollZoneId+'" data-ng-include="\'personalizationsmarteditScrollZoneBottomTemplate.html\'"></div>')(this.$scope);c.element("body").append(e),this.elementToScroll=this.getElementToScroll()},PersonalizationsmarteditScrollZoneComponent.prototype.$onDestroy=function(){var t=this;c.element("#sliderTopScrollZone"+this.scrollZoneId).scope().$destroy(),c.element("#sliderTopScrollZone"+this.scrollZoneId).remove(),c.element("#sliderBottomScrollZone"+this.scrollZoneId).scope().$destroy(),c.element("#sliderBottomScrollZone"+this.scrollZoneId).remove(),c.element("body").contents().each(function(e){e.nodeType===Node.COMMENT_NODE&&e.data.indexOf("personalizationsmarteditScrollZone")>-1&&t.yjQuery(e).remove()})},PersonalizationsmarteditScrollZoneComponent=n.__decorate([Object(i.SeComponent)({inputs:["scrollZoneVisible","getElementToScroll: &","isTransparent","scrollZoneId"]})],PersonalizationsmarteditScrollZoneComponent)}();window.__smartedit__.addDecoratorPayload("SeDirective","PersonalizationCurrentElementDirective",{selector:"[personalization-current-element]"});var b=function(){function PersonalizationCurrentElementDirective(t,e,o){this.$scope=t,this.$element=e,this.$attrs=o}return PersonalizationCurrentElementDirective.$inject=["$scope","$element","$attrs"],PersonalizationCurrentElementDirective.prototype.$postLink=function(){this.$attrs.personalizationCurrentElement&&this.$scope.$parent.$eval(this.$attrs.personalizationCurrentElement)(this.$element.parent())},PersonalizationCurrentElementDirective=n.__decorate([Object(i.SeDirective)({selector:"[personalization-current-element]"})],PersonalizationCurrentElementDirective)}();window.__smartedit__.addDecoratorPayload("SeDirective","PersonalizationPreventParentScrollDirective",{selector:"[personalization-prevent-parent-scroll]"});var E=function(){function PersonalizationPreventParentScrollDirective(t,e){this.$scope=t,this.$element=e}return PersonalizationPreventParentScrollDirective.$inject=["$scope","$element"],PersonalizationPreventParentScrollDirective.prototype.$postLink=function(){var t=this,e=function(e){var o=e.originalEvent&&(e.originalEvent.wheelDeltaY||e.originalEvent.wheelDelta),n=-(e.deltaY||e.delta)||0;t.$element.parent()[0].scrollTop-=e.wheelDeltaY||o||e.wheelDelta||n,e.stopPropagation(),e.preventDefault(),e.returnValue=!1};this.$element.parent()[0].addEventListener("wheel",e,!1),this.$scope.$parent.$on("$destroy",function(){t.$element.parent()[0].removeEventListener("wheel",e,!1)})},PersonalizationPreventParentScrollDirective=n.__decorate([Object(i.SeDirective)({selector:"[personalization-prevent-parent-scroll]"})],PersonalizationPreventParentScrollDirective)}();window.__smartedit__.addDecoratorPayload("SeDirective","PersonalizationInfiniteScrollDirective",{selector:"[personalization-infinite-scroll]"});var x=function(){function PersonalizationInfiniteScrollDirective(t,e,o,n,i,a,r){this.$scope=t,this.$element=e,this.$attrs=o,this.$rootScope=n,this.yjQuery=i,this.$window=a,this.$timeout=r}return PersonalizationInfiniteScrollDirective.$inject=["$scope","$element","$attrs","$rootScope","yjQuery","$window","$timeout"],PersonalizationInfiniteScrollDirective.prototype.$postLink=function(){var t,e,o,n,i=this;return this.$window=c.element(this.$window),o=0,null!==this.$attrs.personalizationInfiniteScrollDistance&&this.$scope.$parent.$watch(this.$attrs.personalizationInfiniteScrollDistance,function(t){return o=parseInt(t,10)}),n=!0,t=!1,null!==this.$attrs.personalizationInfiniteScrollDisabled&&this.$scope.$parent.$watch(this.$attrs.personalizationInfiniteScrollDisabled,function(o){if((n=!o)&&t)return t=!1,e()}),this.$rootScope.$on("refreshStart",function(){i.$element.animate({scrollTop:"0"})}),e=function(){var e,a,r;if(!(i.$element.children().length<=0))return e=i.yjQuery(i.$element.children()[0]),a=i.$element.offset().top+i.$element.height(),(r=e.offset().top+e.height()-a<=i.$element.height()*o)&&n?i.$rootScope.$$phase?i.$scope.$parent.$eval(i.$attrs.personalizationInfiniteScroll):i.$scope.$parent.$apply(i.$attrs.personalizationInfiniteScroll):r?t=!0:void 0},this.$element.on("scroll",e),this.$scope.$parent.$on("$destroy",function(){return i.$window.off("scroll",e)}),this.$timeout(function(){return i.$attrs.personalizationInfiniteScrollImmediateCheck?i.$scope.$parent.$eval(i.$attrs.personalizationInfiniteScrollImmediateCheck)?e():void 0:e()},0)},PersonalizationInfiniteScrollDirective=n.__decorate([Object(i.SeDirective)({selector:"[personalization-infinite-scroll]"})],PersonalizationInfiniteScrollDirective)}(),D=function(){function PersonalizationsmarteditCommonsModule(){}return PersonalizationsmarteditCommonsModule=n.__decorate([Object(i.SeModule)({imports:["personalizationcommonsTemplates","smarteditServicesModule","yjqueryModule","l10nModule","alertServiceModule"],providers:[P,{provide:"PaginationHelper",useFactory:function(){return function(t){return new P(t)}}},u,d,p,C,h,z,S,v,g,y,T],declarations:[_,b,x,E,f,I]})],PersonalizationsmarteditCommonsModule)}(),A={provide:"COMPONENT_CONTAINER_TYPE",useValue:"CxCmsComponentContainer"},O={provide:"CONTAINER_SOURCE_ID_ATTR",useValue:"data-smartedit-container-source-id"},w=function(){function PersonalizationsmarteditComponentHandlerService(t,e,o,n,i,a,r,s){this.componentHandlerService=t,this.yjQuery=e,this.CONTAINER_TYPE_ATTRIBUTE=o,this.CONTAINER_ID_ATTRIBUTE=n,this.TYPE_ATTRIBUTE=i,this.CONTENT_SLOT_TYPE=a,this.COMPONENT_CONTAINER_TYPE=r,this.CONTAINER_SOURCE_ID_ATTR=s}return PersonalizationsmarteditComponentHandlerService.$inject=["componentHandlerService","yjQuery","CONTAINER_TYPE_ATTRIBUTE","CONTAINER_ID_ATTRIBUTE","TYPE_ATTRIBUTE","CONTENT_SLOT_TYPE","COMPONENT_CONTAINER_TYPE","CONTAINER_SOURCE_ID_ATTR"],PersonalizationsmarteditComponentHandlerService.prototype.getParentContainerForComponent=function(t){return t.closest("["+this.CONTAINER_TYPE_ATTRIBUTE+"="+this.COMPONENT_CONTAINER_TYPE+"]")},PersonalizationsmarteditComponentHandlerService.prototype.getParentContainerIdForComponent=function(t){return t.closest("["+this.CONTAINER_TYPE_ATTRIBUTE+"="+this.COMPONENT_CONTAINER_TYPE+"]").attr(this.CONTAINER_ID_ATTRIBUTE)},PersonalizationsmarteditComponentHandlerService.prototype.getParentContainerSourceIdForComponent=function(t){return t.closest("["+this.CONTAINER_TYPE_ATTRIBUTE+"="+this.COMPONENT_CONTAINER_TYPE+"]").attr(this.CONTAINER_SOURCE_ID_ATTR)},PersonalizationsmarteditComponentHandlerService.prototype.getParentSlotForComponent=function(t){return t.closest("["+this.TYPE_ATTRIBUTE+"="+this.CONTENT_SLOT_TYPE+"]")},PersonalizationsmarteditComponentHandlerService.prototype.getParentSlotIdForComponent=function(t){return this.componentHandlerService.getParentSlotForComponent(t)},PersonalizationsmarteditComponentHandlerService.prototype.getOriginalComponent=function(t,e){return this.componentHandlerService.getOriginalComponent(t,e)},PersonalizationsmarteditComponentHandlerService.prototype.isExternalComponent=function(t,e){return this.componentHandlerService.isExternalComponent(t,e)},PersonalizationsmarteditComponentHandlerService.prototype.getCatalogVersionUuid=function(t){return this.componentHandlerService.getCatalogVersionUuid(t)},PersonalizationsmarteditComponentHandlerService.prototype.getAllSlotsSelector=function(){return this.componentHandlerService.getAllSlotsSelector()},PersonalizationsmarteditComponentHandlerService.prototype.getFromSelector=function(t){return this.yjQuery(t)},PersonalizationsmarteditComponentHandlerService.prototype.getContainerSourceIdForContainerId=function(t){var e=this.getAllSlotsSelector();e+=" ["+this.CONTAINER_ID_ATTRIBUTE+'="'+t+'"]';var o=this.getFromSelector(e);return o[0]?o[0].getAttribute(this.CONTAINER_SOURCE_ID_ATTR):""},PersonalizationsmarteditComponentHandlerService=n.__decorate([Object(i.SeInjectable)()],PersonalizationsmarteditComponentHandlerService)}(),N=function(){function PersonalizationsmarteditCustomizeViewHelper(t,e){this.personalizationsmarteditComponentHandlerService=t,this.lodash=e}return PersonalizationsmarteditCustomizeViewHelper.$inject=["personalizationsmarteditComponentHandlerService","lodash"],PersonalizationsmarteditCustomizeViewHelper.prototype.getSourceContainersInfo=function(){var t=this,e=this.personalizationsmarteditComponentHandlerService.getAllSlotsSelector();e+=" [data-smartedit-container-source-id]";var o=this.personalizationsmarteditComponentHandlerService.getFromSelector(e).map(function(e,o){var n=t.personalizationsmarteditComponentHandlerService.getFromSelector(o);return{containerId:t.personalizationsmarteditComponentHandlerService.getParentContainerIdForComponent(n),containerSourceId:t.personalizationsmarteditComponentHandlerService.getParentContainerSourceIdForComponent(n)}});return this.lodash.countBy(o,"containerSourceId")},PersonalizationsmarteditCustomizeViewHelper=n.__decorate([Object(i.SeInjectable)()],PersonalizationsmarteditCustomizeViewHelper)}(),M=function(){function PersonalizationsmarteditContextService(t,e,o,n){this.yjQuery=t,this.contextualMenuService=e,this.personalizationsmarteditContextServiceReverseProxy=o,this.personalizationsmarteditContextUtils=n;var i=n.getContextObject();this.setPersonalization(i.personalization),this.setCustomize(i.customize),this.setCombinedView(i.combinedView),this.setSeData(i.seData)}return PersonalizationsmarteditContextService.$inject=["yjQuery","contextualMenuService","personalizationsmarteditContextServiceReverseProxy","personalizationsmarteditContextUtils"],PersonalizationsmarteditContextService.prototype.getPersonalization=function(){return this.personalization},PersonalizationsmarteditContextService.prototype.setPersonalization=function(t){this.personalization=t,this.contextualMenuService.refreshMenuItems()},PersonalizationsmarteditContextService.prototype.getCustomize=function(){return this.customize},PersonalizationsmarteditContextService.prototype.setCustomize=function(t){this.customize=t,this.contextualMenuService.refreshMenuItems()},PersonalizationsmarteditContextService.prototype.getCombinedView=function(){return this.combinedView},PersonalizationsmarteditContextService.prototype.setCombinedView=function(t){this.combinedView=t,this.contextualMenuService.refreshMenuItems()},PersonalizationsmarteditContextService.prototype.getSeData=function(){return this.seData},PersonalizationsmarteditContextService.prototype.setSeData=function(t){this.seData=t},PersonalizationsmarteditContextService.prototype.isCurrentPageActiveWorkflowRunning=function(){return this.personalizationsmarteditContextServiceReverseProxy.isCurrentPageActiveWorkflowRunning()},PersonalizationsmarteditContextService=n.__decorate([Object(i.SeInjectable)()],PersonalizationsmarteditContextService)}(),$=function(){function PersonalizationsmarteditContextServiceProxy(t,e){this.personalizationsmarteditContextService=t,this.crossFrameEventService=e}return PersonalizationsmarteditContextServiceProxy.$inject=["personalizationsmarteditContextService","crossFrameEventService"],PersonalizationsmarteditContextServiceProxy.prototype.setPersonalization=function(t){this.personalizationsmarteditContextService.setPersonalization(t)},PersonalizationsmarteditContextServiceProxy.prototype.setCustomize=function(t){this.personalizationsmarteditContextService.setCustomize(t),this.crossFrameEventService.publish("PERSONALIZATION_CUSTOMIZE_CONTEXT_SYNCHRONIZED")},PersonalizationsmarteditContextServiceProxy.prototype.setCombinedView=function(t){this.personalizationsmarteditContextService.setCombinedView(t),this.crossFrameEventService.publish("PERSONALIZATION_COMBINEDVIEW_CONTEXT_SYNCHRONIZED")},PersonalizationsmarteditContextServiceProxy.prototype.setSeData=function(t){this.personalizationsmarteditContextService.setSeData(t)},PersonalizationsmarteditContextServiceProxy=n.__decorate([Object(i.GatewayProxied)("setPersonalization","setCustomize","setCombinedView","setSeData"),Object(i.SeInjectable)()],PersonalizationsmarteditContextServiceProxy)}(),V=function(){function PersonalizationsmarteditContextServiceReverseProxy(){}return PersonalizationsmarteditContextServiceReverseProxy.prototype.applySynchronization=function(){"proxyFunction"},PersonalizationsmarteditContextServiceReverseProxy.prototype.isCurrentPageActiveWorkflowRunning=function(){"proxyFunction"},PersonalizationsmarteditContextServiceReverseProxy=n.__decorate([Object(i.GatewayProxied)("applySynchronization","isCurrentPageActiveWorkflowRunning"),Object(i.SeInjectable)()],PersonalizationsmarteditContextServiceReverseProxy)}(),R=function(){function PersonalizationsmarteditContextualMenuService(t,e,o,n,i){var a=this;this.personalizationsmarteditContextService=t,this.personalizationsmarteditComponentHandlerService=e,this.personalizationsmarteditUtils=o,this.personalizationsmarteditContextMenuServiceProxy=n,this.lodash=i,this.personalizationsmarteditContextService.isCurrentPageActiveWorkflowRunning().then(function(t){a.isWorkflowRunning=t})}var t;return PersonalizationsmarteditContextualMenuService.$inject=["personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService","personalizationsmarteditUtils","personalizationsmarteditContextMenuServiceProxy","lodash"],t=PersonalizationsmarteditContextualMenuService,PersonalizationsmarteditContextualMenuService.prototype.refreshContext=function(){this.contextPersonalization=this.personalizationsmarteditContextService.getPersonalization(),this.contextCustomize=this.personalizationsmarteditContextService.getCustomize(),this.contextCombinedView=this.personalizationsmarteditContextService.getCombinedView(),this.contextSeData=this.personalizationsmarteditContextService.getSeData()},PersonalizationsmarteditContextualMenuService.prototype.openDeleteAction=function(t){var e=this.lodash.isString(t.componentAttributes)?JSON.parse(t.componentAttributes):t.componentAttributes,o={};o.containerId=t.containerId,o.containerSourceId=e.smarteditContainerSourceId,o.slotId=t.slotId,o.actionId=e.smarteditPersonalizationActionId||null,o.selectedVariationCode=e.smarteditPersonalizationVariationId||null,o.selectedCustomizationCode=e.smarteditPersonalizationCustomizationId||null;var n=e.smarteditCatalogVersionUuid.split("/");o.componentCatalog=n[0],o.componentCatalogVersion=n[1];var i=this.getSelectedCustomization(o.selectedCustomizationCode);o.catalog=i.catalog,o.catalogVersion=i.catalogVersion,o.slotsToRefresh=this.getSlotsToRefresh(e.smarteditContainerSourceId),this.personalizationsmarteditContextMenuServiceProxy.openDeleteAction(o)},PersonalizationsmarteditContextualMenuService.prototype.openAddAction=function(t){var e=this.lodash.isString(t.componentAttributes)?JSON.parse(t.componentAttributes):t.componentAttributes,o={};o.componentType=t.componentType,o.componentId=t.componentId,o.containerId=t.containerId,o.containerSourceId=e.smarteditContainerSourceId,o.slotId=t.slotId,o.actionId=e.smarteditPersonalizationActionId||null,o.selectedVariationCode=this.getSelectedVariationCode();var n=e.smarteditCatalogVersionUuid.split("/");o.componentCatalog=n[0];var i=this.getSelectedCustomization();o.catalog=i.catalog,o.selectedCustomizationCode=i.code;var a=this.personalizationsmarteditComponentHandlerService.getParentSlotForComponent(t.element),r=this.personalizationsmarteditComponentHandlerService.getCatalogVersionUuid(a).split("/");return o.slotCatalog=r[0],o.slotsToRefresh=this.getSlotsToRefresh(e.smarteditContainerSourceId),o.slotsToRefresh.push(t.slotId),this.personalizationsmarteditContextMenuServiceProxy.openAddAction(o)},PersonalizationsmarteditContextualMenuService.prototype.openEditAction=function(t){var e=this.lodash.isString(t.componentAttributes)?JSON.parse(t.componentAttributes):t.componentAttributes,o={};return o.componentType=t.componentType,o.componentId=t.componentId,o.containerId=t.containerId,o.containerSourceId=e.smarteditContainerSourceId,o.slotId=t.slotId,o.actionId=e.smarteditPersonalizationActionId||null,o.selectedVariationCode=e.smarteditPersonalizationVariationId||null,o.selectedCustomizationCode=e.smarteditPersonalizationCustomizationId||null,o.componentUuid=e.smarteditComponentUuid||null,o.slotsToRefresh=this.getSlotsToRefresh(e.smarteditContainerSourceId),this.personalizationsmarteditContextMenuServiceProxy.openEditAction(o)},PersonalizationsmarteditContextualMenuService.prototype.openEditComponentAction=function(t){var e=this.lodash.isString(t.componentAttributes)?JSON.parse(t.componentAttributes):t.componentAttributes,o={};return o.smarteditComponentType=e.smarteditComponentType,o.smarteditComponentUuid=e.smarteditComponentUuid,o.smarteditCatalogVersionUuid=e.smarteditCatalogVersionUuid,this.personalizationsmarteditContextMenuServiceProxy.openEditComponentAction(o)},PersonalizationsmarteditContextualMenuService.prototype.isCustomizeObjectValid=function(t){return this.lodash.isObject(t.selectedCustomization)&&this.lodash.isObject(t.selectedVariations)&&!this.lodash.isArray(t.selectedVariations)},PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuEnabled=function(){return this.isCustomizeObjectValid(this.contextCustomize)||this.contextCombinedView.enabled&&this.isCustomizeObjectValid(this.contextCombinedView.customize)},PersonalizationsmarteditContextualMenuService.prototype.isElementHighlighted=function(t){return this.contextCombinedView.enabled?this.lodash.indexOf(this.contextCombinedView.customize.selectedComponents,t.componentAttributes.smarteditContainerSourceId)>-1:this.lodash.indexOf(this.contextCustomize.selectedComponents,t.componentAttributes.smarteditContainerSourceId)>-1},PersonalizationsmarteditContextualMenuService.prototype.isSlotInCurrentCatalog=function(t){var e=this.personalizationsmarteditComponentHandlerService.getParentSlotForComponent(t.element),o=this.personalizationsmarteditComponentHandlerService.getCatalogVersionUuid(e);return this.contextSeData.seExperienceData.catalogDescriptor.catalogVersionUuid===o},PersonalizationsmarteditContextualMenuService.prototype.isComponentInCurrentCatalog=function(t){return this.contextSeData.seExperienceData.catalogDescriptor.catalogVersionUuid===t.componentAttributes.smarteditCatalogVersionUuid},PersonalizationsmarteditContextualMenuService.prototype.isSelectedCustomizationFromCurrentCatalog=function(){var t=this.contextCustomize.selectedCustomization||this.contextCombinedView.customize.selectedCustomization;return!!t&&this.personalizationsmarteditUtils.isItemFromCurrentCatalog(t,this.personalizationsmarteditContextService.getSeData())},PersonalizationsmarteditContextualMenuService.prototype.isCustomizationFromCurrentCatalog=function(t){var e=(this.contextCombinedView.selectedItems||[]).filter(function(e){return e.customization.code===t.componentAttributes.smarteditPersonalizationCustomizationId&&e.variation.code===t.componentAttributes.smarteditPersonalizationVariationId});return!!(e=e.shift())&&this.personalizationsmarteditUtils.isItemFromCurrentCatalog(e.customization,this.personalizationsmarteditContextService.getSeData())},PersonalizationsmarteditContextualMenuService.prototype.isEditPersnalizationInWorkflowAllowed=function(e){return!0===(this.personalizationsmarteditContextService.getSeData().seConfigurationData||[])[t.EDIT_PERSONALIZATION_IN_WORKFLOW]?e:e&&!this.isWorkflowRunning},PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuAddItemEnabled=function(t){this.refreshContext();var e=this.isContextualMenuEnabled();return e=(e=(e=e&&!this.isElementHighlighted(t))&&this.isSlotInCurrentCatalog(t))&&this.isSelectedCustomizationFromCurrentCatalog(),this.isEditPersnalizationInWorkflowAllowed(e)},PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuEditItemEnabled=function(t){this.refreshContext();var e=this.contextPersonalization.enabled;return e=(e=(e=e&&!this.lodash.isUndefined(t.componentAttributes.smarteditPersonalizationActionId))&&this.isSlotInCurrentCatalog(t))&&(this.isSelectedCustomizationFromCurrentCatalog()||this.isCustomizationFromCurrentCatalog(t)),this.isEditPersnalizationInWorkflowAllowed(e)},PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuDeleteItemEnabled=function(t){return this.isContextualMenuEditItemEnabled(t)},PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuShowActionListEnabled=function(t){this.refreshContext();var e=!this.lodash.isUndefined(t.componentAttributes.smarteditPersonalizationActionId);return e=(e=e&&this.contextCombinedView.enabled)&&!this.contextCombinedView.customize.selectedCustomization},PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuInfoItemEnabled=function(){this.refreshContext();var t=this.contextPersonalization.enabled;return t=(t=(t=t&&!this.lodash.isObject(this.contextCustomize.selectedVariations))||this.lodash.isArray(this.contextCustomize.selectedVariations))&&!this.contextCombinedView.enabled},PersonalizationsmarteditContextualMenuService.prototype.isContextualMenuEditComponentItemEnabled=function(t){this.refreshContext();var e=this.contextPersonalization.enabled;return e=e&&!this.contextCombinedView.enabled&&this.isComponentInCurrentCatalog(t)},PersonalizationsmarteditContextualMenuService.prototype.getSelectedVariationCode=function(){return this.personalizationsmarteditContextService.getCombinedView().enabled?this.personalizationsmarteditContextService.getCombinedView().customize.selectedVariations.code:this.personalizationsmarteditContextService.getCustomize().selectedVariations.code},PersonalizationsmarteditContextualMenuService.prototype.getSelectedCustomization=function(t){if(this.personalizationsmarteditContextService.getCombinedView().enabled){var e=this.personalizationsmarteditContextService.getCombinedView().customize.selectedCustomization;return!e&&t&&(e=this.personalizationsmarteditContextService.getCombinedView().selectedItems.filter(function(e){return e.customization.code===t})[0].customization),e}return this.personalizationsmarteditContextService.getCustomize().selectedCustomization},PersonalizationsmarteditContextualMenuService.prototype.getSlotsToRefresh=function(t){var e=this,o=this.personalizationsmarteditComponentHandlerService.getAllSlotsSelector();o+=' [data-smartedit-container-source-id="'+t+'"]';var n=this.personalizationsmarteditComponentHandlerService.getFromSelector(o);return Array.prototype.slice.call(this.lodash.map(n,function(t){return e.personalizationsmarteditComponentHandlerService.getParentSlotIdForComponent(e.personalizationsmarteditComponentHandlerService.getFromSelector(t))}))},PersonalizationsmarteditContextualMenuService.EDIT_PERSONALIZATION_IN_WORKFLOW="personalizationsmartedit.editPersonalizationInWorkflow.enabled",PersonalizationsmarteditContextualMenuService=t=n.__decorate([Object(i.SeInjectable)()],PersonalizationsmarteditContextualMenuService)}(),U={provide:"ACTIONS_DETAILS",useValue:"/personalizationwebservices/v1/catalogs/:catalogId/catalogVersions/:catalogVersion/actions"},L=function(){function PersonalizationsmarteditRestService(t,e,o){this.restServiceFactory=t,this.personalizationsmarteditContextService=e,this.ACTIONS_DETAILS=o}return PersonalizationsmarteditRestService.$inject=["restServiceFactory","personalizationsmarteditContextService","ACTIONS_DETAILS"],PersonalizationsmarteditRestService.prototype.extendRequestParamObjWithCatalogAwarePathVariables=function(t,e){e=e||{};var o=this.personalizationsmarteditContextService.getSeData().seExperienceData,n={catalogId:e.catalog||o.catalogDescriptor.catalogId,catalogVersion:e.catalogVersion||o.catalogDescriptor.catalogVersion};return t=c.extend(t,n)},PersonalizationsmarteditRestService.prototype.getCxCmsAllActionsForContainer=function(t,e){var o;e=e||{};var n=this.restServiceFactory.get(this.ACTIONS_DETAILS);return o={type:"CXCMSACTION",customizationStatus:"ENABLED",variationStatus:"ENABLED",catalogs:"ALL",needsTotal:!0,containerId:t,pageSize:e.currentSize||25,currentPage:e.currentPage||0},o=this.extendRequestParamObjWithCatalogAwarePathVariables(o,void 0),n.get(o)},PersonalizationsmarteditRestService=n.__decorate([Object(i.SeInjectable)()],PersonalizationsmarteditRestService)}(),k=function(){function PersonalizationsmarteditContextMenuServiceProxy(){}return PersonalizationsmarteditContextMenuServiceProxy.prototype.openDeleteAction=function(t){"proxyFunction"},PersonalizationsmarteditContextMenuServiceProxy.prototype.openAddAction=function(t){"proxyFunction"},PersonalizationsmarteditContextMenuServiceProxy.prototype.openEditAction=function(t){"proxyFunction"},PersonalizationsmarteditContextMenuServiceProxy.prototype.openEditComponentAction=function(t){"proxyFunction"},PersonalizationsmarteditContextMenuServiceProxy=n.__decorate([Object(i.GatewayProxied)("openDeleteAction","openAddAction","openEditAction","openEditComponentAction"),Object(i.SeInjectable)()],PersonalizationsmarteditContextMenuServiceProxy)}(),F=function(){function PersonalizationsmarteditServicesModule(){}return PersonalizationsmarteditServicesModule=n.__decorate([Object(i.SeModule)({imports:["smarteditServicesModule","yLoDashModule",D],providers:[w,N,M,$,V,L,R,k,A,O,U]})],PersonalizationsmarteditServicesModule)}();window.__smartedit__.addDecoratorPayload("SeComponent","PersonalizationsmarteditShowComponentInfoListComponent",{templateUrl:"personalizationsmarteditShowComponentInfoListTemplate.html",inputs:["containerId"]});var j=function(){function PersonalizationsmarteditShowComponentInfoListComponent(t,e,o,n,i,a,r){this.personalizationsmarteditContextService=t,this.personalizationsmarteditUtils=e,this.personalizationsmarteditRestService=o,this.personalizationsmarteditMessageHandler=n,this.$filter=i,this.personalizationsmarteditComponentHandlerService=a,this.permissionService=r}return PersonalizationsmarteditShowComponentInfoListComponent.$inject=["personalizationsmarteditContextService","personalizationsmarteditUtils","personalizationsmarteditRestService","personalizationsmarteditMessageHandler","$filter","personalizationsmarteditComponentHandlerService","permissionService"],PersonalizationsmarteditShowComponentInfoListComponent.prototype.$onInit=function(){this.initPageSize=25,this.moreCustomizationsRequestProcessing=!1,this.isContainerIdEmpty=!this.containerId,this.containerSourceId=this.isContainerIdEmpty?"":this.personalizationsmarteditComponentHandlerService.getContainerSourceIdForContainerId(this.containerId),this.pagination=new P({}),this.pagination.reset(),this.isPageBlocked=!1,this.isPersonalizationBlockedOnPage()},PersonalizationsmarteditShowComponentInfoListComponent.prototype.isCustomizationFromCurrentCatalog=function(t){return!!t&&this.personalizationsmarteditUtils.isItemFromCurrentCatalog(t,this.personalizationsmarteditContextService.getSeData())},PersonalizationsmarteditShowComponentInfoListComponent.prototype.customizationVisible=function(){return!!this.actions&&(!this.isContainerIdEmpty&&this.actions.length>0)},PersonalizationsmarteditShowComponentInfoListComponent.prototype.getCustomizationsFilterObject=function(){return{currentSize:this.initPageSize,currentPage:this.pagination.getPage()+1}},PersonalizationsmarteditShowComponentInfoListComponent.prototype.isPersonalizationBlockedOnPage=function(){var t=this;this.permissionService.isPermitted([{names:["se.personalization.page"]}]).then(function(e){return t.isPageBlocked=!e})},PersonalizationsmarteditShowComponentInfoListComponent.prototype.getAllActionsAffectingContainerId=function(t,e){var o=this;this.personalizationsmarteditRestService.getCxCmsAllActionsForContainer(t,e).then(function(t){o.actions=o.actions||{};for(var e=t.actions||{},n=0,i=e;n<i.length;n++){var a=i[n];a.customization={},a.customization.catalog=a.actionCatalog,a.customization.catalogVersion=a.actionCatalogVersion,o.personalizationsmarteditUtils.getAndSetCatalogVersionNameL10N(a.customization)}Array.prototype.push.apply(o.actions,e),o.pagination=new P(t.pagination),o.moreCustomizationsRequestProcessing=!1},function(){o.personalizationsmarteditMessageHandler.sendError(o.$filter("translate")("personalization.error.gettingactions")),o.moreCustomizationsRequestProcessing=!1})},PersonalizationsmarteditShowComponentInfoListComponent.prototype.addMoreItems=function(){this.pagination.getPage()<this.pagination.getTotalPages()-1&&!this.moreCustomizationsRequestProcessing&&!this.isContainerIdEmpty&&(this.moreCustomizationsRequestProcessing=!0,this.getAllActionsAffectingContainerId(this.containerSourceId,this.getCustomizationsFilterObject()))},PersonalizationsmarteditShowComponentInfoListComponent=n.__decorate([Object(i.SeComponent)({templateUrl:"personalizationsmarteditShowComponentInfoListTemplate.html",inputs:["containerId"]})],PersonalizationsmarteditShowComponentInfoListComponent)}(),B=function(){function PersonalizationsmarteditShowComponentInfoListModule(){}return PersonalizationsmarteditShowComponentInfoListModule=n.__decorate([Object(i.SeModule)({imports:[D],declarations:[j]})],PersonalizationsmarteditShowComponentInfoListModule)}();window.__smartedit__.addDecoratorPayload("SeComponent","PersonalizationsmarteditShowActionListComponent",{templateUrl:"personalizationsmarteditShowActionListTemplate.html",inputs:["containerId"]});var Z=function(){function PersonalizationsmarteditShowActionListComponent(t,e,o){this.personalizationsmarteditContextService=t,this.personalizationsmarteditUtils=e,this.personalizationsmarteditComponentHandlerService=o}return PersonalizationsmarteditShowActionListComponent.$inject=["personalizationsmarteditContextService","personalizationsmarteditUtils","personalizationsmarteditComponentHandlerService"],PersonalizationsmarteditShowActionListComponent.prototype.$onInit=function(){this.selectedItems=this.personalizationsmarteditContextService.getCombinedView().selectedItems,this.containerSourceId=this.personalizationsmarteditComponentHandlerService.getContainerSourceIdForContainerId(this.containerId)},PersonalizationsmarteditShowActionListComponent.prototype.getLetterForElement=function(t){return this.personalizationsmarteditUtils.getLetterForElement(t)},PersonalizationsmarteditShowActionListComponent.prototype.getClassForElement=function(t){return this.personalizationsmarteditUtils.getClassForElement(t)},PersonalizationsmarteditShowActionListComponent.prototype.initItem=function(t){var e=this;t.visible=!1,(t.variation.actions||[]).forEach(function(o){o.containerId&&o.containerId===e.containerSourceId&&(t.visible=!0)}),this.personalizationsmarteditUtils.getAndSetCatalogVersionNameL10N(t.variation)},PersonalizationsmarteditShowActionListComponent.prototype.isCustomizationFromCurrentCatalog=function(t){return this.personalizationsmarteditUtils.isItemFromCurrentCatalog(t,this.personalizationsmarteditContextService.getSeData())},PersonalizationsmarteditShowActionListComponent=n.__decorate([Object(i.SeComponent)({templateUrl:"personalizationsmarteditShowActionListTemplate.html",inputs:["containerId"]})],PersonalizationsmarteditShowActionListComponent)}(),H=function(){function PersonalizationsmarteditShowActionListModule(){}return PersonalizationsmarteditShowActionListModule=n.__decorate([Object(i.SeModule)({imports:[D],declarations:[Z]})],PersonalizationsmarteditShowActionListModule)}(),W=function(){function PersonalizationsmarteditCustomizeViewServiceProxy(t){this.personalizationsmarteditCustomizeViewHelper=t}return PersonalizationsmarteditCustomizeViewServiceProxy.$inject=["personalizationsmarteditCustomizeViewHelper"],PersonalizationsmarteditCustomizeViewServiceProxy.prototype.getSourceContainersInfo=function(){return this.personalizationsmarteditCustomizeViewHelper.getSourceContainersInfo()},PersonalizationsmarteditCustomizeViewServiceProxy=n.__decorate([Object(i.GatewayProxied)("getSourceContainersInfo"),Object(i.SeInjectable)()],PersonalizationsmarteditCustomizeViewServiceProxy)}(),q=function(){function PersonalizationsmarteditCustomizeViewModule(){}return PersonalizationsmarteditCustomizeViewModule=n.__decorate([Object(i.SeModule)({imports:[F],providers:[W]})],PersonalizationsmarteditCustomizeViewModule)}(),Y=function(){function PersonalizationsmarteditContextMenuModule(){}return PersonalizationsmarteditContextMenuModule=n.__decorate([Object(i.SeModule)({imports:[F],providers:[k]})],PersonalizationsmarteditContextMenuModule)}();!function doImport(){importAll(o(8)),importAll(o(14))}();var K=function(){function Personalizationsmarteditmodule(){}return Personalizationsmarteditmodule=n.__decorate([Object(i.SeModule)({imports:[H,D,F,B,q,Y,"personalizationsmarteditTemplates","decoratorServiceModule","personalizationsmarteditComponentLightUpDecorator","personalizationsmarteditCombinedViewComponentLightUpDecorator","personalizationsmarteditSharedSlotDecorator","smarteditServicesModule","yjqueryModule","externalComponentDecoratorModule","externalComponentButtonModule","personalizationsmarteditExternalComponentDecoratorModule"],initialize:["yjQuery","domain","$q","personalizationsmarteditComponentHandlerService","personalizationsmarteditContextualMenuService","personalizationsmarteditContextServiceProxy","personalizationsmarteditCustomizeViewServiceProxy","personalizationsmarteditContextMenuServiceProxy","decoratorService","featureService",function(t,e,o,n,i,a,r,s,l,c){"ngInject";!function(e){var o=t("<link rel='stylesheet' type='text/css' href='"+e+"'>");t("head").append(o)}(e+"/personalizationsmartedit/css/style.css"),l.addMappings({"^.*Slot$":["personalizationsmarteditSharedSlot"]}),l.addMappings({"^.*Component$":["personalizationsmarteditComponentLightUp","personalizationsmarteditCombinedViewComponentLightUp"]}),l.addMappings({"^((?!Slot).)*$":["personalizationsmarteditExternalComponentDecorator"]}),c.addDecorator({key:"personalizationsmarteditExternalComponentDecorator",nameI18nKey:"personalizationsmarteditExternalComponentDecorator",displayCondition:function(t,e){var i=n.getOriginalComponent(e,t),a=n.getParentContainerForComponent(i);return a.length>0&&a[0].attributes["data-smartedit-personalization-action-id"]?o.when(!1):o.when(n.isExternalComponent(e,t))}}),c.addDecorator({key:"personalizationsmarteditComponentLightUp",nameI18nKey:"personalizationsmarteditComponentLightUp"}),c.addDecorator({key:"personalizationsmarteditCombinedViewComponentLightUp",nameI18nKey:"personalizationsmarteditCombinedViewComponentLightUp"}),c.addDecorator({key:"personalizationsmarteditSharedSlot",nameI18nKey:"personalizationsmarteditSharedSlot"}),c.addContextualMenuButton({key:"personalizationsmartedit.context.show.action.list",i18nKey:"personalization.context.action.list.show",nameI18nKey:"personalization.context.action.list.show",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuShowActionListEnabled(t)},action:{template:'<personalizationsmartedit-show-action-list data-container-id="ctrl.componentAttributes.smarteditContainerId"></personalizationsmartedit-show-action-list>'},displayClass:"showactionlistbutton",displayIconClass:"hyicon hyicon-combinedview cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-combinedview cmsx-ctx__icon--small",permissions:["se.read.page"],priority:500}),c.addContextualMenuButton({key:"personalizationsmartedit.context.info.action",i18nKey:"personalization.context.action.info",nameI18nKey:"personalization.context.action.info",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuInfoItemEnabled()},action:{template:'<personalizationsmartedit-show-component-info-list data-container-id="ctrl.componentAttributes.smarteditContainerId"></personalizationsmartedit-show-component-info-list>'},displayClass:"infoactionbutton",displayIconClass:"hyicon hyicon-msginfo cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-msginfo cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:510}),c.addContextualMenuButton({key:"personalizationsmartedit.context.add.action",i18nKey:"personalization.context.action.add",nameI18nKey:"personalization.context.action.add",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuAddItemEnabled(t)},action:{callback:function(t,e){i.openAddAction(t)}},displayClass:"addactionbutton",displayIconClass:"hyicon hyicon-addlg cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-addlg cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:520}),c.addContextualMenuButton({key:"personalizationsmartedit.context.component.edit.action",i18nKey:"personalization.context.component.action.edit",nameI18nKey:"personalization.context.component.action.edit",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuEditComponentItemEnabled(t)},action:{callback:function(t,e){i.openEditComponentAction(t)}},displayClass:"editbutton",displayIconClass:"sap-icon--edit cmsx-ctx__icon",displaySmallIconClass:"sap-icon--edit cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:530}),c.addContextualMenuButton({key:"personalizationsmartedit.context.edit.action",i18nKey:"personalization.context.action.edit",nameI18nKey:"personalization.context.action.edit",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuEditItemEnabled(t)},action:{callback:function(t,e){i.openEditAction(t)}},displayClass:"replaceactionbutton",displayIconClass:"hyicon hyicon-change cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-change cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:540}),c.addContextualMenuButton({key:"personalizationsmartedit.context.delete.action",i18nKey:"personalization.context.action.delete",nameI18nKey:"personalization.context.action.delete",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuDeleteItemEnabled(t)},action:{callback:function(t,e){i.openDeleteAction(t)}},displayClass:"removeactionbutton",displayIconClass:"hyicon hyicon-removelg cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-removelg cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:550})}]})],Personalizationsmarteditmodule)}(),G=o(5),Q=o(6),X=o(7),J=function(){function Personalizationsmartedit(){}return Personalizationsmartedit=n.__decorate([Object(i.SeEntryModule)("personalizationsmarteditmodule"),Object(X.NgModule)({imports:[G.BrowserModule,Q.UpgradeModule]})],Personalizationsmartedit)}()}]);